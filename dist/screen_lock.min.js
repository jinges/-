!function(t,i){if("function"==typeof define&&define.amd)define([],i);else if("undefined"!=typeof exports)i();else{i(),t.screenLock={}}}(this,function(){"use strict";var i=function(){function n(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,i,e){return i&&n(t.prototype,i),e&&n(t,e),t}}(),e=new(function(){function t(){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.radius=30,this.padding=20,this.screenWidth=document.body.offsetWidth,this.ninePoint=[],this.selectedPoint=[],this.defaultColor="#92ca02",this.init()}return i(t,[{key:"init",value:function(){var t=document.querySelector("#canvas");this.ctx=t.getContext("2d"),this.getRatio(),this.ctx.scale(this.ratio,this.ratio),this.ctx.translate(.5,.5),t.width=t.height=this.screenWidth*this.ratio,this.canvas=t,this.caculateNinePoint(),this.drawPoint(),this.selectedPoint=[]}},{key:"getRatio",value:function(){var t=this.ctx,i=window.devicePixelRatio||1,e=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;this.ratio=i/e}},{key:"cavulateOverPoint",value:function(t){for(var i=0,e=this.ninePoint.length;i<e;i++){var n=this.ninePoint[i],a=Math.abs(n.x-t.pageX*this.ratio),o=Math.abs(n.y-t.pageY*this.ratio);if(Math.sqrt(Math.pow(a,2)+Math.pow(o,2))<=this.radius&&!this.selectedPoint.includes(n)){this.selectedPoint.push(n);break}}}},{key:"drawLine",value:function(){var t=this.selectedPoint,i=this.ctx;t.length&&(i.beginPath(),i.strokeStyle=this.defaultColor,i.lineWidth=10*this.ratio,this.selectedPoint.map(function(t){i.lineTo(t.x,t.y)}),i.stroke(),i.closePath())}},{key:"drawSelectPoint",value:function(){var i=this,t=this.selectedPoint,e=this.ctx;t.length&&t.map(function(t){i.drawCircle(e,i.defaultColor,t,i.radius),i.drawCircle(e,"#fff",t,i.radius-2),i.drawCircle(e,i.defaultColor,t,i.radius-16)})}},{key:"drawCircle",value:function(t,i,e,n){t.fillStyle=i,t.beginPath(),t.arc(e.x,e.y,n*this.ratio,0,2*Math.PI,!0),t.closePath(),t.fill()}},{key:"drawPoint",value:function(){var e=this,n=this.ctx;this.ninePoint.map(function(t,i){e.drawCircle(n,"#ccc",t,e.radius),e.drawCircle(n,"#fff",t,e.radius-3)})}},{key:"caculateNinePoint",value:function(){for(var t=[],i=(this.screenWidth-2*this.radius*3-2*this.padding)*this.ratio/2,e=0;e<3;e++)for(var n=0;n<3;n++)t.push({x:this.padding*this.ratio+(2*e+1)*this.radius*this.ratio+i*e,y:this.padding*this.ratio+(2*n+1)*this.radius*this.ratio+i*n});this.ninePoint=t}}]),t}());e.canvas.addEventListener("touchstart",function(t){var i=t.touches[0];e.cavulateOverPoint(i)},!1),e.canvas.addEventListener("touchmove",function(t){t.stopPropagation();var i=t.touches[0];e.cavulateOverPoint(i),e.drawLine(),e.drawSelectPoint()},!1),e.canvas.addEventListener("touchend",function(t){console.log(e.selectedPoint),e.init()},!1)});